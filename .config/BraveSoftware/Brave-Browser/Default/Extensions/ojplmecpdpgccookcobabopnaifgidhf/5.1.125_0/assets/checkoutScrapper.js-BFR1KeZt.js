import{x as y,c as h}from"./utility_all2-0mYDd1Oa.js";let s="";function p(o){const l=new Date(o),e=new Date;return l.getDate()===e.getDate()&&l.getMonth()===e.getMonth()&&l.getFullYear()===e.getFullYear()}function S(o){const e=/affid=([^&]+)/.exec(o);return e&&e.length>1?e[1]:""}function _(o){const e=/tag=([^&]+)/.exec(o);return e&&e.length>1?e[1]:""}const u=new Set;function m(o,l){try{if(o==63)if(l.querySelector(".yohtmlc-shipment-status-primaryText")){const r=l.querySelector(".yohtmlc-order-total").textContent.trim();let i=/[0-9,]+/g,c=r.match(i);if(c&&c.length>0){var e=parseInt(c[0].replace(/,/g,""),10);return e}else return 0}else{const r=l.querySelector(".yohtmlc-order-total").querySelector(".a-color-secondary.value").textContent.trim();let i=/[0-9,]+/g,c=r.match(i);if(c&&c.length>0){var e=parseInt(c[0].replace(/,/g,""),10);return e}else return 0}else if(o==2){const r=document.querySelector("._3D2A_w").textContent;var a=/[\d,]+/g,t=r.match(a);if(t&&t.length>0){var e=parseFloat(t[0].replace(/,/g,""),10);return e}else return 0}}catch{}}function f(o,l){try{if(o==63)if(l.querySelector(".yohtmlc-shipment-status-primaryText")){let e=[],a=l.querySelectorAll(".product-image");for(let t=0;t<a.length;t++){let r="",i=a[t].querySelector("a").href;const c=/\/dp\/([^?]+)/,n=i.match(c);n&&n.length>=2&&(r=n[1]),e.push(r)}return e}else{let e=[],a=l.querySelectorAll(".a-fixed-left-grid-col.yohtmlc-item.a-col-right");for(let t=0;t<a.length;t++){let r="",i=a[t].querySelector("a").href;const c=/\/([A-Z0-9]{10})\//,n=i.match(c);n&&n.length>=2&&(r=n[1]),e.push(r)}return e}else if(o==2){let e=[],a=document.querySelectorAll("._2KpZ6l.row._3hTjfv");for(let t=0;t<a.length;t++){let r="",i=a[t].href;const c=/pid=([^&]+)/,n=i.match(c);n&&n.length>=2&&(r=n[1]),e.push(r)}return e}}catch{}}function g(o,l){try{if(o==63)return l.querySelector(".yohtmlc-shipment-status-primaryText")?l.querySelector(".yohtmlc-order-id").querySelector("span[dir='ltr']").textContent:l.querySelector(".yohtmlc-order-id").querySelector("bdi").textContent;if(o==2){var e=/reference_id=([^&]+)/,a=s.match(e);return a?a[1]+"00":""}return""}catch{}}async function x(){try{s=window.location.href;let e=y();if(e==63){let a=_(s);if(a!=""){let t=await localStorage.setItem("val_tag",a)}if(s.includes("/thankyou/")){let t=document.querySelector(".a-alert-heading");if(t&&(t.textContent.includes("Order placed")||t.textContent.toLowerCase().includes("thank you, your amazon fresh")||t.textContent.toLowerCase().includes("thank you your amazon fresh"))){var o="https://www.amazon.in/gp/css/order-history",l=await localStorage.getItem("hasOpened");l||(window.open(o,"_self"),await localStorage.setItem("hasOpened","true"))}}if(s.includes("order-history"))try{let t=document.querySelectorAll(".order-card.js-order-card");for(let r=0;r<t.length;r++)try{let i="",c=document.querySelectorAll(".yohtmlc-shipment-status-primaryText");if(t[r].querySelectorAll(".a-color-secondary.value").length>0?i=t[r].querySelectorAll(".a-color-secondary.value")[0].textContent.trim():i=t[r].querySelector(".a-size-base.a-color-secondary").textContent.trim(),p(i)&&c){const n={order_id:g(e,t[r]),sum_amount:m(e,t[r]),pos:e,pid_list:f(e,t[r]),tag_name:await localStorage.getItem("val_tag")==null?"":await localStorage.getItem("val_tag")};n.pid_list.length>0&&!u.has(n.order_id)&&(await h({type:"checkoutScrap",data:n}),u.add(n.order_id),await localStorage.removeItem("val_tag"))}}catch{}await localStorage.removeItem("hasOpened")}catch{}}else if(e==2)try{let a=S(s);if(a!=""&&await localStorage.setItem("val_affid",a),s.includes("reference_id")){const t={order_id:g(e,s),sum_amount:m(e),pos:e,pid_list:f(e),tag_name:await localStorage.getItem("val_affid")==null?"":await localStorage.getItem("val_affid")};t.pid_list.length>0&&!u.has(t.order_id)&&(await h({type:"checkoutScrap",data:t}),u.add(t.order_id),await localStorage.removeItem("val_affid"))}}catch{}}catch{}}async function w(){await localStorage.removeItem("hasOpened"),x(),clearInterval(v)}const v=setInterval(w,1500);
