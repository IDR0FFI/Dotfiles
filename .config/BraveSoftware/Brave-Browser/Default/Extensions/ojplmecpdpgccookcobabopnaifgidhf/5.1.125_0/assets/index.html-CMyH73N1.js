import{f as Mt,p as Et,t as L,i as J,k as it,e as T,V as be,a as x,s as qt,r as Lt,b as ot,d as k,c as Ft,$ as $t,g as y,F as At,q as St,o as ye,w as we,n as ke,_ as Ie,E as Ne,G as Le,y as Ot,v as jt,x as Ct,A as Dt,m as Ae}from"./sentry-y_Iga7PX.js";import{aa as zt,ab as Ht,ae as a,af as u,ag as I,ad as Kt,ac as W,ai as O,ak as h,a6 as i,a8 as Vt}from"./utility_all2-0mYDd1Oa.js";const Wt=zt({extId:"",extAuth:"",email:"",isVerified:""}),Xt=zt([]),Rt=_=>{Wt.update(s=>({...s,..._}))},Ut=_=>{Xt.set(_)};(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))A(d);new MutationObserver(d=>{for(const v of d)if(v.type==="childList")for(const w of v.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&A(w)}).observe(document,{childList:!0,subtree:!0});function m(d){const v={};return d.integrity&&(v.integrity=d.integrity),d.referrerPolicy&&(v.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?v.credentials="include":d.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function A(d){if(d.ep)return;d.ep=!0;const v=m(d);fetch(d.href,v)}})();var Se=(_,s,m)=>s.onChange(m(),s.id),Oe=L('<div class="flex items-center justify-between w-full"><span><!></span> <label class="relative inline-flex items-center cursor-pointer"><input type="checkbox" class="sr-only peer"> <div class="w-12 h-6 ring-0 outline-none bg-slate-200 rounded-full peer peer-checked:bg-green-600 transition-all duration-300"></div> <div class="absolute left-1 peer-checked:right-5 top-1 bg-white w-4 h-4 rounded-full transition-transform duration-300 peer-checked:translate-x-[24px]"></div></label></div>');function De(_,s){Ht(s,!0);const[m,A]=qt(),d=()=>ot($t,"$LL",m);let v=Et(s,"label",3,""),w=Et(s,"checked",7,!1);var F=Oe(),X=a(F),f=a(X);{var nt=S=>{var D=Lt();I(M=>k(D,M),[()=>d()(`popup.${v()}`)]),x(S,D)},C=S=>{var D=Ft(),M=W(D);{var ht=P=>{var p=Lt("LookALike Button");x(P,p)},xt=P=>{var p=Lt();I(_t=>k(p,_t),[()=>s.id.split("_").join(" ")]),x(P,p)};J(M,P=>{s.id==="Ditto_Button"?P(ht):P(xt,!1)},!0)}x(S,D)};J(f,S=>{v()?S(nt):S(C,!1)})}var $=u(X,2),B=a($);B.__change=[Se,s,w],I(()=>{it(X,`text-base font-medium ${(w()?"text-slate-950":"text-slate-500")??""}`),T(B,"data-index",s.index),T(B,"id",s.id)}),be(B,w),x(_,F),Kt(),A()}Mt(["change"]);const Pe="/assets/alert-BPXgqDhN.svg",Je="/assets/alertRed-DrMi5wv6.svg",Te="/assets/shiledLock-Cth1tG_N.svg",Gt=async()=>{try{const s=await fetch("https://ext1.buyhatke.com/spend-apis/login/gLogin",{method:"POST"});s.ok;const m=await s.json(),{status:A,url:d}=m;if(A){const v=new URL(d);v.searchParams.append("state","https://buyhatke.com/"),window.open(v,"_blank")}}catch{}};async function Be(_,s,m,A){await s.setItem("pushNotStore",""),h(m,y([])),h(A,0)}function Ee(_,s){h(s,!1)}var je=(_,s)=>{s()},Ce=L('<span class="absolute -top-1 -right-1 flex items-center justify-center w-5 h-5 bg-black text-white rounded-full text-xs font-bold" aria-label="Notification count"> </span>'),Ve=L('<button class="text-sm font-medium text-white px-3 py-1 bg-indigo-600 hover:bg-indigo-800 rounded"> </button>'),Re=L('<button class="text-sm font-medium text-indigo-600 underline px-3 py-1 rounded"> </button>'),Ue=L('<div class="text-lg font-medium text-slate-950"> </div>'),Ge=L('<div class="text-lg font-medium text-slate-950"> </div>'),Me=(_,s)=>{h(s,!i(s))},qe=(_,s)=>{h(s,!i(s))},Fe=(_,s,m,A,d)=>{h(s,y(m())),A(d())},$e=L("<button> </button>"),ze=L('<button class="fixed h-screen w-screen left-0 top-0 border-collapse" aria-label="close lang select"></button> <div class="absolute top-10 p-2 gap-2 shadow-md shadow-[#1A4CFB3D] rounded-2xl right-0 bg-white z-[999999] w-[200px] overflow-auto h-[320px]"></div>',1),He=L('<div class="flex items-center justify-between w-full pb-4"><a href="https://buyhatke.com" target="_blank" rel="noreferrer" class="flex gap-2"><img class="logo" alt="Buyhatke Logo" width="32" height="32"> <span class="text-xl font-bold text-slate-950">BuyHatke</span></a> <div class="flex items-center gap-4"><button class="relative"><img class="logo" alt="notification icon" width="32" height="32"> <!></button></div></div> <div class="flex-grow"><div class="py-4 flex flex-col gap-6"><div><div class="w-full flex justify-between items-start"><h2 class="text-slate-950 font-bold text-xl pb-4"> </h2> <!></div> <!></div> <div><div class="flex flex-col gap-2 justify-between pb-4 border-b"><h2 class="text-slate-950 font-bold text-xl"> </h2> <div class="relative text-base"><span class="font-light text-[#5A5A5A] mr-1"> </span> <button class="font-semibold text-[#0A0A0A]"> <img alt="arrowIcon" width="24" height="24"></button> <!></div></div> <div class="mt-3 flex flex-col gap-4"></div></div></div></div>',1),Ke=(_,s,m)=>s(i(m).notfID),We=L('<li class="hk-notifs-li relative isolate"><a target="_blank" class="flex gap-4 border rounded p-1 pr-4 hover:bg-slate-50"><div class="hk-notif-icon-wrap-no w-20 h-20 border rounded overflow-hidden flex-shrink-0"><img alt="Alerts" class="hk-notif-icon--img hk-pop-icons"></div> <div class="space-y-1"><p class="text-sm font-medium text-slate-950 line-clamp-2"> </p> <p class="text-xs font-medium text-slate-600"> </p></div></a> <button class="hk-notif-delete hk-pop-btn absolute -top-2 -right-2 border z-10 px-2 rounded-full text-2xl bg-white hover:bg-slate-100 text-slate-950">&times;</button></li>'),Xe=L('<div class="flex justify-end my-4"><button class="hk-btn-link clearfix px-2 py-1 bg-indigo-600 hover:bg-indigo-800 rounded font-bold text-sm text-white"> </button></div> <ul class="hk-notifs-list flex flex-col gap-4"></ul>',1),Ze=L('<div class="h-full flex items-center justify-center text-lg"> </div>'),Qe=L('<div class="h-full flex flex-col absolute inset-0 bg-white p-4 pt-0 overflow-auto text-slate-950"><header class="border-b pt-2 pb-4 px-0 flex justify-between gap-2 items-center"><div class="flex flex-grow items-center gap-2"><img class="logo w-5 h-5" alt="notification icon"> <h3 class="font-medium text-slate-950 text-base uppercase"> </h3></div> <button class="hk-notif-close text-2xl text-slate-600 hover:text-slate-800">&times;</button></header> <div class="clearfix flex-grow"><!></div></div>'),Ye=L('<!> <div><div class=" flex flex-col gap-4 items-center"><img alt="secure icon" class="w-32 h-32"> <p class="text-xl font-bold text-slate-950">Privacy Zone</p> <p class="text-base font-medium text-slate-600 text-center"><span class="text-slate-950">Buyhatke</span> works only <br> on shopping sites</p></div></div> <main><!></main> <!>',1);function ta(_,s){Ht(s,!0);const[m,A]=qt(),d=()=>ot(St,"$locale",m),v=()=>ot(Xt,"$featureData",m),w=()=>ot($t,"$LL",m),F=()=>ot(Wt,"$extensionDetails",m);let X=`<style>${Ie}</style>`,f=y({}),nt=O(y([]));O(y([]));let C=O(y(chrome)),$=O(!1),B=O(y(At[d()??"en"])),S=O(y([])),D=O(0),M=O(!1),ht=O(!1),xt=O(null),P=O(!1);try{h(C,y(browser))}catch{h(C,y(chrome))}const p={getAllItems:()=>i(C).storage.local.get(),getItem:async t=>(await i(C).storage.local.get(t))[t],setItem:async(t,e)=>{await i(C).storage.local.set({[t]:e}),f[t]=e},removeItem:t=>{i(C).storage.local.remove(t),f[t]&&delete f[t]}},_t=async(t,e)=>{const o=v().find(n=>n.key.replace(/ /g,"_")===e);o&&(o.value=t?1:0);let r=await p.getItem("featuresArray");typeof r=="string"&&(r=JSON.parse(r));const g=r.find(n=>n.key.replace(/ /g,"_")===e);g&&(g.value=t?1:0),await p.setItem("featuresArray",JSON.stringify(r)),Ut(r)},Zt=async()=>{try{const t=f.cachedTopDeals;if(t){const{data:n,timestamp:V}=JSON.parse(t),E=6*60*60*1e3;if(Date.now()-V<E){h(nt,y(n));return}}const e=await fetch("https://search-new.bitbns.com/buyhatke/exclusiveDeals");if(!e.ok)return;const o=await e.json(),{status:r,data:g}=o;if(r&&g){const n=g.slice(0,20);h(nt,y(n)),f.cachedTopDeals=JSON.stringify({data:n,timestamp:Date.now()})}}catch(t){console.error("Error fetching top deals:",t)}},Qt=async()=>{try{f.ext_id=await p.getItem("ext_id"),f.ext_auth=await p.getItem("ext_auth");let t=f.ext_id,e=f.ext_auth;const o=await fetch(`https://ext1.buyhatke.com/spend-apis/login/loggedIn?extId=${t}&extAuth=${e}`,{method:"GET"});if(!o.ok)return;const r=await o.json(),{status:g,data:n}=r;g&&(Rt({email:n.email_id}),await p.setItem("ext_email",n.email_id),await p.setItem("isVerified",1))}catch(t){console.log(t)}};async function Yt(t){await p.setItem("pushNotStore",JSON.stringify(t)),h(S,y(t)),h(D,y(t.length))}async function te(){h(M,!0);const t=await p.getItem("pushNotStore");if(t){const e=JSON.parse(t);e.length>0&&h(S,y(e.slice(-10).reverse()))}}async function ee(t){const e=await p.getItem("pushNotStore");if(e){const r=JSON.parse(e).filter(g=>g.notfID!==t);Yt(r)}}function ae(){return new Promise((t,e)=>{try{chrome.tabs.query({active:!0,currentWindow:!0},o=>{if(chrome.runtime.lastError)return e({url:"",id:""});const r=o[0];if(!(r!=null&&r.url)||!(r!=null&&r.id))return e({url:"",id:""});const g=r.url,n=String(r.id);t({url:g,id:n})})}catch{e({url:"",id:""})}})}function se(t,e){t&&h(P,!0)}async function re(t,e,o){try{for(var r=JSON.parse(t),g=r.length,n=0;n<g;n++){var V=r[n];for(var E in V)var Z=E,Q=r[n][E]}var z={};z[Z]=Q;try{chrome.runtime.sendMessage(z,function(R){if(typeof R<"u"){let N=R.farewell;typeof e=="function"?e(N,o):window[e](N,o)}})}catch{}}catch{}}async function ie(t,e,o){try{t=JSON.stringify(t),o=JSON.stringify(o),re(t,e,o)}catch{}}async function oe(){try{let r=await ae();var t=[{showPrivacyPagePopup:JSON.stringify(r)}];await ie(t,se,[]),f.ext_email=await p.getItem("ext_email"),f.isVerified=await p.getItem("isVerified");var e=f.ext_email;if((e==null||e==""||e.trim()=="")&&(e="NOT_AVAILABEL"),f.featuresArray=await p.getItem("featuresArray"),f.pushNotStore=await p.getItem("pushNotStore"),f.pushNotStore&&f.pushNotStore!="undefined"){let g=f.pushNotStore,n=JSON.parse(g);n.length>0&&h(D,y(n.length))}var o=f.featuresArray;o=JSON.parse(o),Rt({email:e}),Ut(o),Zt(),await le()}catch{}}oe();const ne=t=>{try{St.set(t),chrome.tabs.query({active:!0,currentWindow:!0},e=>{e[0].id&&chrome.tabs.sendMessage(e[0].id,{type:"LANGUAGE_CHANGED",language:t})})}catch{}};St.subscribe(t=>{t&&h(B,y(At[d()??"en"]))});let mt=O(!1);ye(async()=>{Qt(),await we(),h(mt,!0)});const le=async()=>{try{const t=await p.getItem("promotionalSubmissions");if(t&&t!=="undefined"){const e=JSON.parse(t);e&&e.length>0&&(h(xt,y(e[e.length-1])),h(ht,!0))}}catch(t){console.error("Error checking existing submission:",t)}};var Pt=Ye(),Jt=W(Pt);ke(Jt,()=>X);var bt=u(Jt,2),ce=a(bt),de=a(ce),yt=u(bt,2),ue=a(yt);{var ve=t=>{var e=He(),o=W(e),r=a(o),g=a(r);T(g,"src",Ne);var n=u(r,2),V=a(n);V.__click=[je,te];var E=a(V);T(E,"src",Pe);var Z=u(E,2);{var Q=l=>{var c=Ce(),b=a(c);I(()=>k(b,i(D))),x(l,c)};J(Z,l=>{i(D)&&l(Q)})}var z=u(o,2),R=a(z),N=a(R),U=a(N),q=a(U),H=a(q),wt=u(q,2);{var kt=l=>{var c=Ve();c.__click=[Gt];var b=a(c);I(j=>k(b,j),[()=>w()("popup.login")]),x(l,c)},Y=l=>{var c=Re();c.__click=[Gt];var b=a(c);I(j=>k(b,j),[()=>w()("common.change")]),x(l,c)};J(wt,l=>{F().email==="NOT_AVAILABEL"?l(kt):l(Y,!1)})}var G=u(U,2);{var tt=l=>{var c=Ue(),b=a(c);I(j=>k(b,j),[()=>w()("popup.setEmail")]),x(l,c)},et=l=>{var c=Ge(),b=a(c);I(()=>k(b,F().email)),x(l,c)};J(G,l=>{F().email==="NOT_AVAILABEL"?l(tt):l(et,!1)})}var lt=u(N,2),ct=a(lt),dt=a(ct),ut=a(dt),It=u(dt,2),vt=a(It),Nt=a(vt),at=u(vt,2);at.__click=[Me,$];var Tt=a(at),Bt=u(Tt);T(Bt,"src",Le);var ge=u(at,2);{var he=l=>{var c=ze(),b=W(c);b.__click=[qe,$];var j=u(b,2);Ot(j,21,()=>Object.entries(At),Dt,(ft,pt)=>{let gt=()=>i(pt)[0],st=()=>i(pt)[1];var K=$e();K.__click=[Fe,B,st,ne,gt];var rt=a(K);I(()=>{it(K,`mb-1 ${(i(B)===st()?"bg-indigo-50 text-indigo-600 rounded-lg font-extrabold":"font-normal text-[#151515B2]")??""} px-5 py-3 text-sm w-full hover:bg-indigo-100 hover:text-indigo-800 hover:rounded-lg`),k(rt,st())}),x(ft,K)}),x(l,c)};J(ge,l=>{i($)&&l(he)})}var xe=u(ct,2);Ot(xe,5,v,Dt,(l,c,b)=>{let j=()=>i(c).key,ft=()=>i(c).value,pt=()=>i(c).transKey;var gt=Ft(),st=W(gt);{var K=rt=>{const _e=Vt(()=>j().replace(/ /g,"_")),me=Vt(()=>ft()==="1"||ft()===1);De(rt,{get id(){return i(_e)},get label(){return pt()},get checked(){return i(me)},onChange:_t,index:b})};J(st,rt=>{b!==2&&b!==1&&rt(K)})}x(l,gt)}),I((l,c,b)=>{k(H,l),k(ut,c),k(Nt,`${b??""}:`),k(Tt,`${i(B)??""} `),it(Bt,`inline ml-1 ${(i($)?"-rotate-90":"rotate-90")??""}`)},[()=>w()("popup.emailId"),()=>w()("popup.customization"),()=>w()("popup.selectLang")]),x(t,e)};J(ue,t=>{i(mt)&&t(ve)})}var fe=u(yt,2);{var pe=t=>{var e=Qe(),o=a(e),r=a(o),g=a(r);T(g,"src",Je);var n=u(g,2),V=a(n),E=u(r,2);E.__click=[Ee,M];var Z=u(o,2),Q=a(Z);{var z=N=>{var U=Xe(),q=W(U),H=a(q);H.__click=[Be,p,S,D];var wt=a(H),kt=u(q,2);Ot(kt,21,()=>i(S),Dt,(Y,G)=>{var tt=We(),et=a(tt),lt=a(et),ct=a(lt),dt=u(lt,2),ut=a(dt),It=a(ut),vt=u(ut,2),Nt=a(vt),at=u(et,2);at.__click=[Ke,ee,G],I(()=>{T(tt,"data-item",i(G).notfID),T(et,"href",i(G).URL),T(ct,"src",i(G).image),k(It,i(G).title),k(Nt,i(G).detail)}),x(Y,tt)}),I(Y=>k(wt,Y),[()=>w()("popup.clearAll")]),x(N,U)},R=N=>{var U=Ze(),q=a(U);I(H=>k(q,H),[()=>w()("popup.noNotification")]),x(N,U)};J(Q,N=>{i(S).length>0?N(z):N(R,!1)})}I(N=>k(V,N),[()=>w()("popup.notifications")]),jt(1,e,()=>Ct,()=>({duration:300,y:-300})),jt(2,e,()=>Ct,()=>({duration:300,y:-300})),x(t,e)};J(fe,t=>{i(M)&&i(mt)&&t(pe)})}I(t=>{it(bt,`w-[337px] h-[284px] flex-col items-center justify-center bg-white p-6 ${(i(P)?"flex":"hidden")??""}`),T(de,"src",t),it(yt,`w-[360px] h-[576px] flex-col bg-white p-4 text-slate-950 overflow-y-auto ${(i(P)?"hidden":"flex")??""}`)},[()=>chrome.runtime.getURL(Te)]),x(_,Pt),Kt(),A()}Mt(["click"]);Ae(ta,{target:document.getElementById("app")});
